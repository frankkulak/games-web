var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,i;function u(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function g(){return m("")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function b(t,e,n){t.classList[n?"add":"remove"](e)}function x(t){i=t}function _(){if(!i)throw new Error("Function called outside component initialization");return i}function k(t){_().$$.on_mount.push(t)}function E(t){_().$$.on_destroy.push(t)}function j(){const t=_();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}(e,n,{cancelable:o});return s.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function C(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const M=[],L=[],O=[],S=[],A=Promise.resolve();let D=!1;function T(){D||(D=!0,A.then(q))}function R(){return T(),A}function N(t){O.push(t)}function P(t){S.push(t)}const I=new Set;let F=0;function q(){const t=i;do{for(;F<M.length;){const t=M[F];F++,x(t),z(t.$$)}for(x(null),M.length=0,F=0;L.length;)L.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];I.has(e)||(I.add(e),e())}O.length=0}while(M.length);for(;S.length;)S.pop()();D=!1,I.clear(),x(t)}function z(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const Y=new Set;let G;function H(){G={r:0,c:[],p:G}}function X(){G.r||s(G.c),G=G.p}function B(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(Y.has(t))return;Y.add(t),G.c.push((()=>{Y.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function W(t,e){U(t,1,1,(()=>{e.delete(t.key)}))}function J(t,e,n,o,s,r,l,c,i,u,a,f){let d=t.length,h=r.length,m=d;const p={};for(;m--;)p[t[m].key]=m;const g=[],$=new Map,v=new Map;for(m=h;m--;){const t=f(s,r,m),c=n(t);let i=l.get(c);i?o&&i.p(t,e):(i=u(c,t),i.c()),$.set(c,g[m]=i),c in p&&v.set(c,Math.abs(m-p[c]))}const y=new Set,w=new Set;function b(t){B(t,1),t.m(c,a),l.set(t.key,t),a=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],o=e.key,s=n.key;e===n?(a=e.first,d--,h--):$.has(s)?!l.has(o)||y.has(o)?b(e):w.has(s)?d--:v.get(o)>v.get(s)?(w.add(o),b(e)):(y.add(s),d--):(i(n,l),d--)}for(;d--;){const e=t[d];$.has(e.key)||i(e,l)}for(;h;)b(g[h-1]);return g}function K(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const l=t[r],c=e[r];if(c){for(const t in l)t in c||(o[t]=1);for(const t in c)s[t]||(n[t]=c[t],s[t]=1);t[r]=c}else for(const t in l)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function Q(t){return"object"==typeof t&&null!==t?t:{}}function V(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Z(t){t&&t.c()}function tt(t,e,o,l){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,o),l||N((()=>{const e=i.map(n).filter(r);u?u.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(N)}function et(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(e,n,r,l,c,u,a,f=[-1]){const h=i;x(e);const m=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||h.$$.root};a&&a(m.root);let p=!1;if(m.ctx=r?r(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&function(t,e){-1===t.$$.dirty[0]&&(M.push(t),T(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],m.update(),p=!0,s(m.before_update),m.fragment=!!l&&l(m.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();n.intro&&B(e.$$.fragment),tt(e,n.target,n.anchor,n.customElement),q()}x(h)}class ot{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const st=[];function rt(t,e){return{subscribe:lt(t,e).subscribe}}function lt(e,n=t){let o;const s=new Set;function r(t){if(l(e,t)&&(e=t,o)){const t=!st.length;for(const t of s)t[1](),st.push(t,e);if(t){for(let t=0;t<st.length;t+=2)st[t][0](st[t+1]);st.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,c=t){const i=[l,c];return s.add(i),1===s.size&&(o=n(r)||t),l(e),()=>{s.delete(i),0===s.size&&(o(),o=null)}}}}function ct(e,n,o){const l=!Array.isArray(e),c=l?[e]:e,i=n.length<2;return rt(o,(e=>{let o=!1;const u=[];let a=0,f=t;const d=()=>{if(a)return;f();const o=n(l?u[0]:u,e);i?e(o):f=r(o)?o:t},h=c.map(((e,n)=>function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(e,(t=>{u[n]=t,a&=~(1<<n),o&&d()}),(()=>{a|=1<<n}))));return o=!0,d(),function(){s(h),f()}}))}function it(t){let n,o,s;const r=[t[2]];var l=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return l&&(n=new l(c()),n.$on("routeEvent",t[7])),{c(){n&&Z(n.$$.fragment),o=g()},m(t,e){n&&tt(n,t,e),f(t,o,e),s=!0},p(t,e){const s=4&e?K(r,[Q(t[2])]):{};if(l!==(l=t[0])){if(n){H();const t=n;U(t.$$.fragment,1,0,(()=>{et(t,1)})),X()}l?(n=new l(c()),n.$on("routeEvent",t[7]),Z(n.$$.fragment),B(n.$$.fragment,1),tt(n,o.parentNode,o)):n=null}else l&&n.$set(s)},i(t){s||(n&&B(n.$$.fragment,t),s=!0)},o(t){n&&U(n.$$.fragment,t),s=!1},d(t){t&&d(o),n&&et(n,t)}}}function ut(t){let n,o,s;const r=[{params:t[1]},t[2]];var l=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return l&&(n=new l(c()),n.$on("routeEvent",t[6])),{c(){n&&Z(n.$$.fragment),o=g()},m(t,e){n&&tt(n,t,e),f(t,o,e),s=!0},p(t,e){const s=6&e?K(r,[2&e&&{params:t[1]},4&e&&Q(t[2])]):{};if(l!==(l=t[0])){if(n){H();const t=n;U(t.$$.fragment,1,0,(()=>{et(t,1)})),X()}l?(n=new l(c()),n.$on("routeEvent",t[6]),Z(n.$$.fragment),B(n.$$.fragment,1),tt(n,o.parentNode,o)):n=null}else l&&n.$set(s)},i(t){s||(n&&B(n.$$.fragment,t),s=!0)},o(t){n&&U(n.$$.fragment,t),s=!1},d(t){t&&d(o),n&&et(n,t)}}}function at(t){let e,n,o,s;const r=[ut,it],l=[];function c(t,e){return t[1]?0:1}return e=c(t),n=l[e]=r[e](t),{c(){n.c(),o=g()},m(t,n){l[e].m(t,n),f(t,o,n),s=!0},p(t,[s]){let i=e;e=c(t),e===i?l[e].p(t,s):(H(),U(l[i],1,1,(()=>{l[i]=null})),X(),n=l[e],n?n.p(t,s):(n=l[e]=r[e](t),n.c()),B(n,1),n.m(o.parentNode,o))},i(t){s||(B(n),s=!0)},o(t){U(n),s=!1},d(t){l[e].d(t),t&&d(o)}}}function ft(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const dt=rt(null,(function(t){t(ft());const e=()=>{t(ft())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));ct(dt,(t=>t.location)),ct(dt,(t=>t.querystring));const ht=lt(void 0);function mt(t,e,n){let{routes:o={}}=e,{prefix:s=""}=e,{restoreScrollState:r=!1}=e;class l{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,s,r,l=[],c="",i=t.split("/");for(i[0]||i.shift();s=i.shift();)"*"===(n=s[0])?(l.push("wild"),c+="/(.*)"):":"===n?(o=s.indexOf("?",1),r=s.indexOf(".",1),l.push(s.substring(1,~o?o:~r?r:s.length)),c+=~o&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(c+=(~o?"?":"")+"\\"+s.substring(r))):c+="/"+s;return{keys:l,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=o}match(t){if(s)if("string"==typeof s){if(!t.startsWith(s))return null;t=t.substr(s.length)||"/"}else if(s instanceof RegExp){const e=t.match(s);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let o=0;for(;o<this._keys.length;){try{n[this._keys[o]]=decodeURIComponent(e[o+1]||"")||null}catch(t){n[this._keys[o]]=null}o++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const c=[];o instanceof Map?o.forEach(((t,e)=>{c.push(new l(e,t))})):Object.keys(o).forEach((t=>{c.push(new l(t,o[t]))}));let i=null,u=null,a={};const f=j();async function d(t,e){await R(),f(t,e)}let h=null,m=null;var p;r&&(m=t=>{h=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",m),p=()=>{h?window.scrollTo(h.__svelte_spa_router_scrollX,h.__svelte_spa_router_scrollY):window.scrollTo(0,0)},_().$$.after_update.push(p));let g=null,$=null;const v=dt.subscribe((async t=>{g=t;let e=0;for(;e<c.length;){const o=c[e].match(t.location);if(!o){e++;continue}const s={route:c[e].path,location:t.location,querystring:t.querystring,userData:c[e].userData,params:o&&"object"==typeof o&&Object.keys(o).length?o:null};if(!await c[e].checkConditions(s))return n(0,i=null),$=null,void d("conditionsFailed",s);d("routeLoading",Object.assign({},s));const r=c[e].component;if($!=r){r.loading?(n(0,i=r.loading),$=r,n(1,u=r.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},s,{component:i,name:i.name,params:u}))):(n(0,i=null),$=null);const e=await r();if(t!=g)return;n(0,i=e&&e.default||e),$=r}return o&&"object"==typeof o&&Object.keys(o).length?n(1,u=o):n(1,u=null),n(2,a=c[e].props),void d("routeLoaded",Object.assign({},s,{component:i,name:i.name,params:u})).then((()=>{ht.set(u)}))}n(0,i=null),$=null,ht.set(void 0)}));return E((()=>{v(),m&&window.removeEventListener("popstate",m)})),t.$$set=t=>{"routes"in t&&n(3,o=t.routes),"prefix"in t&&n(4,s=t.prefix),"restoreScrollState"in t&&n(5,r=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=r?"manual":"auto")},[i,u,a,o,s,r,function(e){C.call(this,t,e)},function(e){C.call(this,t,e)}]}class pt extends ot{constructor(t){super(),nt(this,t,mt,at,l,{routes:3,prefix:4,restoreScrollState:5})}}const gt=t=>"s:"+t;const $t=(vt={isLightTheme:(yt=function(t){t?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")},{get(t,e=!1){const n=localStorage.getItem(gt(t));return n?"true"===n:e},set(t,e){localStorage.setItem(gt(t),e?"true":"false"),null==yt||yt(e)}})},new Proxy(vt,{get:(t,e)=>t[e].get(e),set:(t,e,n)=>(t[e].set(e,n),!0)}));var vt,yt;const wt=function(t){const e=lt($t[t]);return e.subscribe((e=>{$t[t]=e})),e}("isLightTheme");function bt(e){let n,o,s,r,l;return{c(){n=h("button"),o=h("img"),u(o.src,s=e[1])||v(o,"src",s),v(o,"alt",e[0]),v(o,"class","h-5 w-auto svg")},m(t,s){f(t,n,s),a(n,o),r||(l=$(n,"click",e[2]),r=!0)},p(t,[e]){2&e&&!u(o.src,s=t[1])&&v(o,"src",s),1&e&&v(o,"alt",t[0])},i:t,o:t,d(t){t&&d(n),r=!1,l()}}}function xt(t,e,n){let o,s,r=$t.isLightTheme;const l=wt.subscribe((t=>{n(3,r=t)}));return E((()=>{l()})),t.$$.update=()=>{8&t.$$.dirty&&n(1,o=`./assets/${r?"sunny":"moon"}-outline.svg`),8&t.$$.dirty&&n(0,s=r?"Light":"Dark")},[s,o,function(){n(3,r=!r),document.documentElement.classList.add("theme-transition"),window.setTimeout((()=>{document.documentElement.classList.remove("theme-transition")}),500),wt.set(r)},r]}class _t extends ot{constructor(t){super(),nt(this,t,xt,bt,l,{})}}function kt(e){let n,o,s,r,l,c;return l=new _t({}),{c(){n=h("nav"),o=h("a"),o.innerHTML='<h3 class="gradient-text font-bold">Tiny Games</h3>',s=p(),r=h("div"),Z(l.$$.fragment),v(o,"href","/"),v(r,"class","flex gap-4"),v(n,"class","bg-gray-300 dark:bg-gray-900 shadow-md flex justify-between p-3")},m(t,e){f(t,n,e),a(n,o),a(n,s),a(n,r),tt(l,r,null),c=!0},p:t,i(t){c||(B(l.$$.fragment,t),c=!0)},o(t){U(l.$$.fragment,t),c=!1},d(t){t&&d(n),et(l)}}}class Et extends ot{constructor(t){super(),nt(this,t,null,kt,l,{})}}function jt(e){let n,o;return{c(){n=p(),o=h("section"),o.innerHTML='<a href="#/minesweeper" class="text-black dark:text-white">Minesweeper</a>',document.title="Tiny Games"},m(t,e){f(t,n,e),f(t,o,e)},p:t,i:t,o:t,d(t){t&&d(n),t&&d(o)}}}class Ct extends ot{constructor(t){super(),nt(this,t,null,jt,l,{})}}function Mt(t){let e,n,o;function r(t,e){return t[0].mine?St:Ot}let l=r(t),c=l(t);return{c(){e=h("div"),c.c(),v(e,"class","w-8 h-8 flex justify-center items-center bg-gray-300 dark:bg-gray-900 dug-cell minesweeper-cell svelte-1a7u9yv"),b(e,"is-odd",t[1])},m(s,r){f(s,e,r),c.m(e,null),n||(o=[$(e,"contextmenu",t[4]),$(e,"dblclick",t[7])],n=!0)},p(t,n){l===(l=r(t))&&c?c.p(t,n):(c.d(1),c=l(t),c&&(c.c(),c.m(e,null))),2&n&&b(e,"is-odd",t[1])},d(t){t&&d(e),c.d(),n=!1,s(o)}}}function Lt(t){let e,n,o,r=t[0].flag&&At();return{c(){e=h("div"),r&&r.c(),v(e,"class","w-8 h-8 flex justify-center items-center undug-cell minesweeper-cell svelte-1a7u9yv"),b(e,"is-odd",t[1])},m(s,l){f(s,e,l),r&&r.m(e,null),n||(o=[$(e,"click",t[5]),$(e,"dblclick",t[3]),$(e,"touchstart",t[8]),$(e,"mousedown",t[8]),$(e,"touchend",t[9],{passive:!0}),$(e,"mouseup",t[9]),$(e,"contextmenu",t[6])],n=!0)},p(t,n){t[0].flag?r||(r=At(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),2&n&&b(e,"is-odd",t[1])},d(t){t&&d(e),r&&r.d(),n=!1,s(o)}}}function Ot(t){let e,n;return{c(){e=h("p"),n=m(t[2]),v(e,"class","my-0 text-gray-600 dark:text-gray-300 font-bold svelte-1a7u9yv"),w(e,"color","var(--minesweeper-count-"+t[0].closeMines+")")},m(t,o){f(t,e,o),a(e,n)},p(t,o){4&o&&y(n,t[2]),1&o&&w(e,"color","var(--minesweeper-count-"+t[0].closeMines+")")},d(t){t&&d(e)}}}function St(e){let n;return{c(){n=h("div"),v(n,"class","w-4 h-4 rounded-full bg-red-600 dark:bg-red-700")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function At(t){let e,n;return{c(){e=h("img"),u(e.src,n="./assets/flag.svg")||v(e,"src","./assets/flag.svg"),v(e,"alt","Flag"),v(e,"class","svg-light w-4 h-4")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Dt(e){let n;function o(t,e){return t[0].dug?Mt:Lt}let s=o(e),r=s(e);return{c(){r.c(),n=g()},m(t,e){r.m(t,e),f(t,n,e)},p(t,[e]){s===(s=o(t))&&r?r.p(t,e):(r.d(1),r=s(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&d(n)}}}function Tt(t,e,n){let o,s,{isOdd:r}=e,{model:l}=e,{cell:c}=e;function i(t){t.preventDefault(),n(0,c.flag=!c.flag,c),n(10,l)}return t.$$set=t=>{"isOdd"in t&&n(1,r=t.isOdd),"model"in t&&n(10,l=t.model),"cell"in t&&n(0,c=t.cell)},t.$$.update=()=>{1&t.$$.dirty&&n(2,o=0===c.closeMines?"":c.closeMines)},[c,r,o,function(t){t.preventDefault(),c.flag||(l.dig(c),n(10,l))},function(t){t.preventDefault(),c.mine&&n(0,c.flag=!0,c),n(0,c.dug=!1,c),n(10,l)},function(t){t.preventDefault(),l.hasDug||(l.initialDig(c),n(10,l))},i,function(t){t.preventDefault(),l.clearAdjacent(c),n(10,l)},function(t){s&&clearTimeout(s),s=setTimeout((()=>i(t)),800)},function(){clearTimeout(s)},l]}class Rt extends ot{constructor(t){super(),nt(this,t,Tt,Dt,l,{isOdd:1,model:10,cell:0})}}function Nt(t,e,n){const o=t.slice();return o[2]=e[n],o[4]=n,o}function Pt(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function It(t){let e,n,o=[],s=new Map,r=t[0].columns;const l=t=>t[4];for(let e=0;e<r.length;e+=1){let n=Nt(t,r,e),c=l(n);s.set(c,o[e]=qt(c,n))}return{c(){e=h("div");for(let t=0;t<o.length;t+=1)o[t].c();v(e,"class","bg-gray-300 dark:bg-gray-900 rounded p-1")},m(t,s){f(t,e,s);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){1&n&&(r=t[0].columns,H(),o=J(o,n,l,1,t,r,s,e,W,qt,null,Nt),X())},i(t){if(!n){for(let t=0;t<r.length;t+=1)B(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)U(o[t]);n=!1},d(t){t&&d(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Ft(t,e){let n,o,s,r;function l(t){e[1](t)}let c={isOdd:(e[4]+e[7])%2==1,cell:e[5]};return void 0!==e[0]&&(c.model=e[0]),o=new Rt({props:c}),L.push((()=>V(o,"model",l))),{key:t,first:null,c(){n=g(),Z(o.$$.fragment),this.first=n},m(t,e){f(t,n,e),tt(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.isOdd=(e[4]+e[7])%2==1),1&n&&(r.cell=e[5]),!s&&1&n&&(s=!0,r.model=e[0],P((()=>s=!1))),o.$set(r)},i(t){r||(B(o.$$.fragment,t),r=!0)},o(t){U(o.$$.fragment,t),r=!1},d(t){t&&d(n),et(o,t)}}}function qt(t,e){let n,o,s,r=[],l=new Map,c=e[2];const i=t=>t[7];for(let t=0;t<c.length;t+=1){let n=Pt(e,c,t),o=i(n);l.set(o,r[t]=Ft(o,n))}return{key:t,first:null,c(){n=h("div");for(let t=0;t<r.length;t+=1)r[t].c();o=p(),v(n,"class","flex"),this.first=n},m(t,e){f(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null);a(n,o),s=!0},p(t,s){e=t,1&s&&(c=e[2],H(),r=J(r,s,i,1,e,c,l,n,W,Ft,o,Pt),X())},i(t){if(!s){for(let t=0;t<c.length;t+=1)B(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)U(r[t]);s=!1},d(t){t&&d(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function zt(t){let e,n,o=t[0]&&It(t);return{c(){o&&o.c(),e=g()},m(t,s){o&&o.m(t,s),f(t,e,s),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&B(o,1)):(o=It(t),o.c(),B(o,1),o.m(e.parentNode,e)):o&&(H(),U(o,1,1,(()=>{o=null})),X())},i(t){n||(B(o),n=!0)},o(t){U(o),n=!1},d(t){o&&o.d(t),t&&d(e)}}}function Yt(t,e,n){let{model:o}=e;return t.$$set=t=>{"model"in t&&n(0,o=t.model)},[o,function(t){o=t,n(0,o)}]}class Gt extends ot{constructor(t){super(),nt(this,t,Yt,zt,l,{model:0})}}class Ht{constructor(t,e,n){this.numColumns=t,this.numRows=e,this.fillRate=n,this.columns=[],this.numMines=0,this.hasDug=!1;for(let o=0;o<t;o++){const t=[];this.columns.push(t);for(let s=0;s<e;s++){const e=Math.random()<n;e&&this.numMines++,t.push({mine:e,dug:!1,flag:!1,column:o,row:s})}}for(let n=0;n<t;n++)for(let t=0;t<e;t++){const e=this.columns[n][t];e.mine||(e.closeMines=0,e.closeMines+=this.getAdjacentCells(e).map((t=>t.mine)).filter((t=>t)).length)}}get numFlags(){return this.allCells.filter((t=>t.flag)).length}get allCells(){return this._allCells||(this._allCells=[],this.columns.forEach((t=>{t.forEach((t=>{this._allCells.push(t)}))}))),this._allCells}getCell(t,e){var n;return null===(n=this.columns[t])||void 0===n?void 0:n[e]}getAdjacentCells(t){const e=t.column,n=t.row,o=[];let s;const r=this.columns[e-1];(s=null==r?void 0:r[n-1])&&o.push(s),(s=null==r?void 0:r[n])&&o.push(s),(s=null==r?void 0:r[n+1])&&o.push(s);const l=this.columns[e];(s=null==l?void 0:l[n-1])&&o.push(s),(s=null==l?void 0:l[n+1])&&o.push(s);const c=this.columns[e+1];return(s=null==c?void 0:c[n-1])&&o.push(s),(s=null==c?void 0:c[n])&&o.push(s),(s=null==c?void 0:c[n+1])&&o.push(s),o}dig(t){if(t.dug=!0,!t.mine&&0===t.closeMines){this.getAdjacentCells(t).forEach((t=>{t.dug||this.dig(t)}))}}clearAdjacent(t){const e=this.getAdjacentCells(t),n=e.filter((t=>t.flag)).filter((t=>t)).length;n===t.closeMines&&e.forEach((t=>{t.flag||this.dig(t)}))}initialDig(t){const e=this.getAdjacentCells(t);t.mine?t.flag=!0:this.dig(t),e.forEach((t=>{t.mine?t.flag=!0:this.dig(t)})),this.hasDug=!0}solve(){this.allCells.forEach((t=>{t.mine?(t.dug=!1,t.flag=!0):t.dug=!0}))}}function Xt(t){let e,n,o,r,l,c,i,u,g,w,b,x,_,k,E,j,C=t[0].numFlags+"",M=t[0].numMines+"";function O(e){t[3](e)}let S={};return void 0!==t[0]&&(S.model=t[0]),x=new Gt({props:S}),L.push((()=>V(x,"model",O))),{c(){e=h("div"),n=h("p"),o=m(C),r=m(" of "),l=m(M),c=m(" mines found"),i=p(),u=h("button"),u.textContent="Refresh",g=p(),w=h("button"),w.textContent="Solve",b=p(),Z(x.$$.fragment),v(n,"class","my-0 text-black dark:text-white"),v(u,"class","p-2 rounded bg-sky-500 text-white dark:text-gray-800"),v(w,"class","p-2 rounded bg-sky-500 text-white dark:text-gray-800"),v(e,"class","flex justify-center items-center gap-4 text-center")},m(s,d){f(s,e,d),a(e,n),a(n,o),a(n,r),a(n,l),a(n,c),a(e,i),a(e,u),a(e,g),a(e,w),f(s,b,d),tt(x,s,d),k=!0,E||(j=[$(u,"click",t[1]),$(w,"click",t[2])],E=!0)},p(t,e){(!k||1&e)&&C!==(C=t[0].numFlags+"")&&y(o,C),(!k||1&e)&&M!==(M=t[0].numMines+"")&&y(l,M);const n={};!_&&1&e&&(_=!0,n.model=t[0],P((()=>_=!1))),x.$set(n)},i(t){k||(B(x.$$.fragment,t),k=!0)},o(t){U(x.$$.fragment,t),k=!1},d(t){t&&d(e),t&&d(b),et(x,t),E=!1,s(j)}}}function Bt(t){let e,n,o,s,r=t[0]&&Xt(t);return{c(){e=p(),n=h("section"),o=h("div"),r&&r.c(),document.title="Minesweeper",v(o,"class","flex flex-col flex-wrap gap-4"),v(n,"class","flex justify-center")},m(t,l){f(t,e,l),f(t,n,l),a(n,o),r&&r.m(o,null),s=!0},p(t,[e]){t[0]?r?(r.p(t,e),1&e&&B(r,1)):(r=Xt(t),r.c(),B(r,1),r.m(o,null)):r&&(H(),U(r,1,1,(()=>{r=null})),X())},i(t){s||(B(r),s=!0)},o(t){U(r),s=!1},d(t){t&&d(e),t&&d(n),r&&r.d()}}}function Ut(t,e,n){let o=null;function s(){n(0,o=new Ht(20,20,.22))}return k(s),[o,s,function(){o.solve(),n(0,o)},function(t){o=t,n(0,o)}]}class Wt extends ot{constructor(t){super(),nt(this,t,Ut,Bt,l,{})}}function Jt(t,e,n){let{params:o}=e;return k((()=>{!async function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await R();const e=("#"==t.charAt(0)?"":"#")+t;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}("/")})),t.$$set=t=>{"params"in t&&n(0,o=t.params)},[o]}class Kt extends ot{constructor(t){super(),nt(this,t,Jt,null,l,{params:0})}}function Qt(e){let n,o,s,r,l;return n=new Et({}),r=new pt({props:{routes:e[0]}}),{c(){Z(n.$$.fragment),o=p(),s=h("main"),Z(r.$$.fragment),v(s,"class","svelte-5kshsn")},m(t,e){tt(n,t,e),f(t,o,e),f(t,s,e),tt(r,s,null),l=!0},p:t,i(t){l||(B(n.$$.fragment,t),B(r.$$.fragment,t),l=!0)},o(t){U(n.$$.fragment,t),U(r.$$.fragment,t),l=!1},d(t){et(n,t),t&&d(o),t&&d(s),et(r)}}}function Vt(t){return[{"/":Ct,"/minesweeper":Wt,"*":Kt}]}return new class extends ot{constructor(t){super(),nt(this,t,Vt,Qt,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
