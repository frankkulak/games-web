var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,i;function u(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function g(){return m("")}function $(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}function x(t){i=t}function _(){if(!i)throw new Error("Function called outside component initialization");return i}function k(t){_().$$.on_mount.push(t)}function E(t){_().$$.on_destroy.push(t)}function j(){const t=_();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}(e,n,{cancelable:s});return o.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function M(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const C=[],L=[],O=[],S=[],A=Promise.resolve();let T=!1;function D(){T||(T=!0,A.then(q))}function R(){return D(),A}function N(t){O.push(t)}function P(t){S.push(t)}const F=new Set;let I=0;function q(){const t=i;do{for(;I<C.length;){const t=C[I];I++,x(t),z(t.$$)}for(x(null),C.length=0,I=0;L.length;)L.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];F.has(e)||(F.add(e),e())}O.length=0}while(C.length);for(;S.length;)S.pop()();T=!1,F.clear(),x(t)}function z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const H=new Set;let Y;function G(){Y={r:0,c:[],p:Y}}function X(){Y.r||o(Y.c),Y=Y.p}function B(t,e){t&&t.i&&(H.delete(t),t.i(e))}function U(t,e,n,s){if(t&&t.o){if(H.has(t))return;H.add(t),Y.c.push((()=>{H.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function W(t,e){U(t,1,1,(()=>{e.delete(t.key)}))}function J(t,e,n,s,o,r,l,c,i,u,a,f){let d=t.length,h=r.length,m=d;const p={};for(;m--;)p[t[m].key]=m;const g=[],$=new Map,v=new Map;for(m=h;m--;){const t=f(o,r,m),c=n(t);let i=l.get(c);i?s&&i.p(t,e):(i=u(c,t),i.c()),$.set(c,g[m]=i),c in p&&v.set(c,Math.abs(m-p[c]))}const y=new Set,b=new Set;function w(t){B(t,1),t.m(c,a),l.set(t.key,t),a=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],s=e.key,o=n.key;e===n?(a=e.first,d--,h--):$.has(o)?!l.has(s)||y.has(s)?w(e):b.has(o)?d--:v.get(s)>v.get(o)?(b.add(s),w(e)):(y.add(o),d--):(i(n,l),d--)}for(;d--;){const e=t[d];$.has(e.key)||i(e,l)}for(;h;)w(g[h-1]);return g}function K(t,e){const n={},s={},o={$$scope:1};let r=t.length;for(;r--;){const l=t[r],c=e[r];if(c){for(const t in l)t in c||(s[t]=1);for(const t in c)o[t]||(n[t]=c[t],o[t]=1);t[r]=c}else for(const t in l)o[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function Q(t){return"object"==typeof t&&null!==t?t:{}}function V(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Z(t){t&&t.c()}function tt(t,e,s,l){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,s),l||N((()=>{const e=i.map(n).filter(r);u?u.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(N)}function et(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(e,n,r,l,c,u,a,f=[-1]){const h=i;x(e);const m=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:n.target||h.$$.root};a&&a(m.root);let p=!1;if(m.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),p&&function(t,e){-1===t.$$.dirty[0]&&(C.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!l&&l(m.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();n.intro&&B(e.$$.fragment),tt(e,n.target,n.anchor,n.customElement),q()}x(h)}class st{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ot=[];function rt(t,e){return{subscribe:lt(t,e).subscribe}}function lt(e,n=t){let s;const o=new Set;function r(t){if(l(e,t)&&(e=t,s)){const t=!ot.length;for(const t of o)t[1](),ot.push(t,e);if(t){for(let t=0;t<ot.length;t+=2)ot[t][0](ot[t+1]);ot.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,c=t){const i=[l,c];return o.add(i),1===o.size&&(s=n(r)||t),l(e),()=>{o.delete(i),0===o.size&&(s(),s=null)}}}}function ct(e,n,s){const l=!Array.isArray(e),c=l?[e]:e,i=n.length<2;return rt(s,(e=>{let s=!1;const u=[];let a=0,f=t;const d=()=>{if(a)return;f();const s=n(l?u[0]:u,e);i?e(s):f=r(s)?s:t},h=c.map(((e,n)=>function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(e,(t=>{u[n]=t,a&=~(1<<n),s&&d()}),(()=>{a|=1<<n}))));return s=!0,d(),function(){o(h),f()}}))}function it(t){let n,s,o;const r=[t[2]];var l=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return l&&(n=new l(c()),n.$on("routeEvent",t[7])),{c(){n&&Z(n.$$.fragment),s=g()},m(t,e){n&&tt(n,t,e),f(t,s,e),o=!0},p(t,e){const o=4&e?K(r,[Q(t[2])]):{};if(l!==(l=t[0])){if(n){G();const t=n;U(t.$$.fragment,1,0,(()=>{et(t,1)})),X()}l?(n=new l(c()),n.$on("routeEvent",t[7]),Z(n.$$.fragment),B(n.$$.fragment,1),tt(n,s.parentNode,s)):n=null}else l&&n.$set(o)},i(t){o||(n&&B(n.$$.fragment,t),o=!0)},o(t){n&&U(n.$$.fragment,t),o=!1},d(t){t&&d(s),n&&et(n,t)}}}function ut(t){let n,s,o;const r=[{params:t[1]},t[2]];var l=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return l&&(n=new l(c()),n.$on("routeEvent",t[6])),{c(){n&&Z(n.$$.fragment),s=g()},m(t,e){n&&tt(n,t,e),f(t,s,e),o=!0},p(t,e){const o=6&e?K(r,[2&e&&{params:t[1]},4&e&&Q(t[2])]):{};if(l!==(l=t[0])){if(n){G();const t=n;U(t.$$.fragment,1,0,(()=>{et(t,1)})),X()}l?(n=new l(c()),n.$on("routeEvent",t[6]),Z(n.$$.fragment),B(n.$$.fragment,1),tt(n,s.parentNode,s)):n=null}else l&&n.$set(o)},i(t){o||(n&&B(n.$$.fragment,t),o=!0)},o(t){n&&U(n.$$.fragment,t),o=!1},d(t){t&&d(s),n&&et(n,t)}}}function at(t){let e,n,s,o;const r=[ut,it],l=[];function c(t,e){return t[1]?0:1}return e=c(t),n=l[e]=r[e](t),{c(){n.c(),s=g()},m(t,n){l[e].m(t,n),f(t,s,n),o=!0},p(t,[o]){let i=e;e=c(t),e===i?l[e].p(t,o):(G(),U(l[i],1,1,(()=>{l[i]=null})),X(),n=l[e],n?n.p(t,o):(n=l[e]=r[e](t),n.c()),B(n,1),n.m(s.parentNode,s))},i(t){o||(B(n),o=!0)},o(t){U(n),o=!1},d(t){l[e].d(t),t&&d(s)}}}function ft(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const dt=rt(null,(function(t){t(ft());const e=()=>{t(ft())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));ct(dt,(t=>t.location)),ct(dt,(t=>t.querystring));const ht=lt(void 0);function mt(t,e,n){let{routes:s={}}=e,{prefix:o=""}=e,{restoreScrollState:r=!1}=e;class l{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:s}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,o,r,l=[],c="",i=t.split("/");for(i[0]||i.shift();o=i.shift();)"*"===(n=o[0])?(l.push("wild"),c+="/(.*)"):":"===n?(s=o.indexOf("?",1),r=o.indexOf(".",1),l.push(o.substring(1,~s?s:~r?r:o.length)),c+=~s&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(c+=(~s?"?":"")+"\\"+o.substring(r))):c+="/"+o;return{keys:l,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=s}match(t){if(o)if("string"==typeof o){if(!t.startsWith(o))return null;t=t.substr(o.length)||"/"}else if(o instanceof RegExp){const e=t.match(o);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let s=0;for(;s<this._keys.length;){try{n[this._keys[s]]=decodeURIComponent(e[s+1]||"")||null}catch(t){n[this._keys[s]]=null}s++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const c=[];s instanceof Map?s.forEach(((t,e)=>{c.push(new l(e,t))})):Object.keys(s).forEach((t=>{c.push(new l(t,s[t]))}));let i=null,u=null,a={};const f=j();async function d(t,e){await R(),f(t,e)}let h=null,m=null;var p;r&&(m=t=>{h=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",m),p=()=>{h?window.scrollTo(h.__svelte_spa_router_scrollX,h.__svelte_spa_router_scrollY):window.scrollTo(0,0)},_().$$.after_update.push(p));let g=null,$=null;const v=dt.subscribe((async t=>{g=t;let e=0;for(;e<c.length;){const s=c[e].match(t.location);if(!s){e++;continue}const o={route:c[e].path,location:t.location,querystring:t.querystring,userData:c[e].userData,params:s&&"object"==typeof s&&Object.keys(s).length?s:null};if(!await c[e].checkConditions(o))return n(0,i=null),$=null,void d("conditionsFailed",o);d("routeLoading",Object.assign({},o));const r=c[e].component;if($!=r){r.loading?(n(0,i=r.loading),$=r,n(1,u=r.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},o,{component:i,name:i.name,params:u}))):(n(0,i=null),$=null);const e=await r();if(t!=g)return;n(0,i=e&&e.default||e),$=r}return s&&"object"==typeof s&&Object.keys(s).length?n(1,u=s):n(1,u=null),n(2,a=c[e].props),void d("routeLoaded",Object.assign({},o,{component:i,name:i.name,params:u})).then((()=>{ht.set(u)}))}n(0,i=null),$=null,ht.set(void 0)}));return E((()=>{v(),m&&window.removeEventListener("popstate",m)})),t.$$set=t=>{"routes"in t&&n(3,s=t.routes),"prefix"in t&&n(4,o=t.prefix),"restoreScrollState"in t&&n(5,r=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=r?"manual":"auto")},[i,u,a,s,o,r,function(e){M.call(this,t,e)},function(e){M.call(this,t,e)}]}class pt extends st{constructor(t){super(),nt(this,t,mt,at,l,{routes:3,prefix:4,restoreScrollState:5})}}const gt=t=>"s:"+t;const $t=(vt={isLightTheme:(yt=function(t){t?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")},{get(t,e=!1){const n=localStorage.getItem(gt(t));return n?"true"===n:e},set(t,e){localStorage.setItem(gt(t),e?"true":"false"),null==yt||yt(e)}})},new Proxy(vt,{get:(t,e)=>t[e].get(e),set:(t,e,n)=>(t[e].set(e,n),!0)}));var vt,yt;const bt=function(t){const e=lt($t[t]);return e.subscribe((e=>{$t[t]=e})),e}("isLightTheme");function wt(e){let n,s,o,r,l;return{c(){n=h("button"),s=h("img"),u(s.src,o=e[1])||v(s,"src",o),v(s,"alt",e[0]),v(s,"class","h-5 w-auto svg")},m(t,o){f(t,n,o),a(n,s),r||(l=$(n,"click",e[2]),r=!0)},p(t,[e]){2&e&&!u(s.src,o=t[1])&&v(s,"src",o),1&e&&v(s,"alt",t[0])},i:t,o:t,d(t){t&&d(n),r=!1,l()}}}function xt(t,e,n){let s,o,r=$t.isLightTheme;const l=bt.subscribe((t=>{n(3,r=t)}));return E((()=>{l()})),t.$$.update=()=>{8&t.$$.dirty&&n(1,s=`./assets/${r?"sunny":"moon"}-outline.svg`),8&t.$$.dirty&&n(0,o=r?"Light":"Dark")},[o,s,function(){n(3,r=!r),document.documentElement.classList.add("theme-transition"),window.setTimeout((()=>{document.documentElement.classList.remove("theme-transition")}),500),bt.set(r)},r]}class _t extends st{constructor(t){super(),nt(this,t,xt,wt,l,{})}}function kt(e){let n,s,o,r,l,c;return l=new _t({}),{c(){n=h("nav"),s=h("a"),s.innerHTML='<h3 class="gradient-text font-bold">Tiny Games</h3>',o=p(),r=h("div"),Z(l.$$.fragment),v(s,"href","/"),v(r,"class","flex gap-4"),v(n,"class","bg-gray-300 dark:bg-gray-900 shadow-md flex justify-between p-3")},m(t,e){f(t,n,e),a(n,s),a(n,o),a(n,r),tt(l,r,null),c=!0},p:t,i(t){c||(B(l.$$.fragment,t),c=!0)},o(t){U(l.$$.fragment,t),c=!1},d(t){t&&d(n),et(l)}}}class Et extends st{constructor(t){super(),nt(this,t,null,kt,l,{})}}function jt(e){let n,s;return{c(){n=p(),s=h("section"),s.innerHTML='<div class="w-60"><a href="#/minesweeper"><div class="rounded-lg bg-gray-100 dark:bg-gray-700 shadow-lg w-60"><img src="./assets/minesweeper.png" alt="Minesweeper" class="rounded-t-lg w-60"/> \n        <div class="py-2 w-full text-center"><h3 class="text-black dark:text-white font-bold">Minesweeper</h3></div></div></a></div>',document.title="Tiny Games"},m(t,e){f(t,n,e),f(t,s,e)},p:t,i:t,o:t,d(t){t&&d(n),t&&d(s)}}}class Mt extends st{constructor(t){super(),nt(this,t,null,jt,l,{})}}function Ct(t){let e,n,s;function r(t,e){return t[0].mine?St:Ot}let l=r(t),c=l(t);return{c(){e=h("div"),c.c(),v(e,"class","w-9 h-9 flex justify-center items-center bg-gray-300 dark:bg-gray-900 dug-cell minesweeper-cell svelte-1dtpbvj"),w(e,"is-odd",t[1])},m(o,r){f(o,e,r),c.m(e,null),n||(s=[$(e,"contextmenu",t[5]),$(e,"dblclick",t[8])],n=!0)},p(t,n){l===(l=r(t))&&c?c.p(t,n):(c.d(1),c=l(t),c&&(c.c(),c.m(e,null))),2&n&&w(e,"is-odd",t[1])},d(t){t&&d(e),c.d(),n=!1,o(s)}}}function Lt(t){let e,n,s,r,l=t[0].flag&&At(),c=t[2]&&Tt(t);return{c(){e=h("div"),l&&l.c(),n=p(),c&&c.c(),v(e,"class","w-9 h-9 flex justify-center items-center undug-cell minesweeper-cell relative svelte-1dtpbvj"),w(e,"is-odd",t[1])},m(o,i){f(o,e,i),l&&l.m(e,null),a(e,n),c&&c.m(e,null),s||(r=[$(e,"click",t[6]),$(e,"dblclick",t[4]),$(e,"touchstart",t[9]),$(e,"mousedown",t[9]),$(e,"touchend",t[10],{passive:!0}),$(e,"mouseup",t[10]),$(e,"contextmenu",t[7])],s=!0)},p(t,s){t[0].flag?l||(l=At(),l.c(),l.m(e,n)):l&&(l.d(1),l=null),t[2]?c?c.p(t,s):(c=Tt(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null),2&s&&w(e,"is-odd",t[1])},d(t){t&&d(e),l&&l.d(),c&&c.d(),s=!1,o(r)}}}function Ot(t){let e,n;return{c(){e=h("p"),n=m(t[3]),v(e,"class","my-0 text-gray-600 dark:text-gray-300 font-bold svelte-1dtpbvj"),b(e,"color","var(--minesweeper-count-"+t[0].closeMines+")")},m(t,s){f(t,e,s),a(e,n)},p(t,s){8&s&&y(n,t[3]),1&s&&b(e,"color","var(--minesweeper-count-"+t[0].closeMines+")")},d(t){t&&d(e)}}}function St(e){let n;return{c(){n=h("div"),v(n,"class","w-4 h-4 rounded-full bg-red-600 dark:bg-red-700")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function At(t){let e,n;return{c(){e=h("img"),u(e.src,n="./assets/flag.svg")||v(e,"src","./assets/flag.svg"),v(e,"alt","Flag"),v(e,"class","svg-light w-4 h-4 svelte-1dtpbvj")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Tt(e){let n,s,r;return{c(){n=h("div"),n.innerHTML='<img src="./assets/flag.svg" alt="Flag" class="svg-light w-4 h-4 svelte-1dtpbvj"/>',v(n,"class","absolute bottom-6 p-2 bg-sky-500 rounded-full shadow-sm")},m(t,o){f(t,n,o),s||(r=[$(n,"mouseup",e[7]),$(n,"touchend",e[7])],s=!0)},p:t,d(t){t&&d(n),s=!1,o(r)}}}function Dt(e){let n;function s(t,e){return t[0].dug?Ct:Lt}let o=s(e),r=o(e);return{c(){r.c(),n=g()},m(t,e){r.m(t,e),f(t,n,e)},p(t,[e]){o===(o=s(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},i:t,o:t,d(t){r.d(t),t&&d(n)}}}function Rt(t,e,n){let s,o,{isOdd:r}=e,{model:l}=e,{cell:c}=e,i=!1;function u(t){t.preventDefault(),n(0,c.flag=!c.flag,c),n(11,l)}return t.$$set=t=>{"isOdd"in t&&n(1,r=t.isOdd),"model"in t&&n(11,l=t.model),"cell"in t&&n(0,c=t.cell)},t.$$.update=()=>{1&t.$$.dirty&&n(3,s=0===c.closeMines?"":c.closeMines)},[c,r,i,s,function(t){t.preventDefault(),c.flag||(l.dig(c),n(11,l))},function(t){t.preventDefault(),c.mine&&n(0,c.flag=!0,c),n(0,c.dug=!1,c),n(11,l)},function(t){t.preventDefault(),l.hasDug||(l.initialDig(c),n(11,l))},u,function(t){t.preventDefault(),l.clearAdjacent(c),n(11,l)},function(t){n(2,i=!0),o&&clearTimeout(o),o=setTimeout((()=>u(t)),500)},function(){n(2,i=!1),clearTimeout(o)},l]}class Nt extends st{constructor(t){super(),nt(this,t,Rt,Dt,l,{isOdd:1,model:11,cell:0})}}function Pt(t,e,n){const s=t.slice();return s[2]=e[n],s[4]=n,s}function Ft(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function It(t){let e,n,s=[],o=new Map,r=t[0].columns;const l=t=>t[4];for(let e=0;e<r.length;e+=1){let n=Pt(t,r,e),c=l(n);o.set(c,s[e]=zt(c,n))}return{c(){e=h("div");for(let t=0;t<s.length;t+=1)s[t].c();v(e,"class","bg-gray-300 dark:bg-gray-900 rounded p-1")},m(t,o){f(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){1&n&&(r=t[0].columns,G(),s=J(s,n,l,1,t,r,o,e,W,zt,null,Pt),X())},i(t){if(!n){for(let t=0;t<r.length;t+=1)B(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)U(s[t]);n=!1},d(t){t&&d(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function qt(t,e){let n,s,o,r;function l(t){e[1](t)}let c={isOdd:(e[4]+e[7])%2==1,cell:e[5]};return void 0!==e[0]&&(c.model=e[0]),s=new Nt({props:c}),L.push((()=>V(s,"model",l))),{key:t,first:null,c(){n=g(),Z(s.$$.fragment),this.first=n},m(t,e){f(t,n,e),tt(s,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.isOdd=(e[4]+e[7])%2==1),1&n&&(r.cell=e[5]),!o&&1&n&&(o=!0,r.model=e[0],P((()=>o=!1))),s.$set(r)},i(t){r||(B(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&d(n),et(s,t)}}}function zt(t,e){let n,s,o,r=[],l=new Map,c=e[2];const i=t=>t[7];for(let t=0;t<c.length;t+=1){let n=Ft(e,c,t),s=i(n);l.set(s,r[t]=qt(s,n))}return{key:t,first:null,c(){n=h("div");for(let t=0;t<r.length;t+=1)r[t].c();s=p(),v(n,"class","flex"),this.first=n},m(t,e){f(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null);a(n,s),o=!0},p(t,o){e=t,1&o&&(c=e[2],G(),r=J(r,o,i,1,e,c,l,n,W,qt,s,Ft),X())},i(t){if(!o){for(let t=0;t<c.length;t+=1)B(r[t]);o=!0}},o(t){for(let t=0;t<r.length;t+=1)U(r[t]);o=!1},d(t){t&&d(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Ht(t){let e,n,s=t[0]&&It(t);return{c(){s&&s.c(),e=g()},m(t,o){s&&s.m(t,o),f(t,e,o),n=!0},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&B(s,1)):(s=It(t),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(G(),U(s,1,1,(()=>{s=null})),X())},i(t){n||(B(s),n=!0)},o(t){U(s),n=!1},d(t){s&&s.d(t),t&&d(e)}}}function Yt(t,e,n){let{model:s}=e;return t.$$set=t=>{"model"in t&&n(0,s=t.model)},[s,function(t){s=t,n(0,s)}]}class Gt extends st{constructor(t){super(),nt(this,t,Yt,Ht,l,{model:0})}}class Xt{constructor(t,e,n){this.numColumns=t,this.numRows=e,this.fillRate=n,this.columns=[],this.numMines=0,this.hasDug=!1;for(let s=0;s<t;s++){const t=[];this.columns.push(t);for(let o=0;o<e;o++){const e=Math.random()<n;e&&this.numMines++,t.push({mine:e,dug:!1,flag:!1,column:s,row:o})}}for(let n=0;n<t;n++)for(let t=0;t<e;t++){const e=this.columns[n][t];e.mine||(e.closeMines=0,e.closeMines+=this.getAdjacentCells(e).map((t=>t.mine)).filter((t=>t)).length)}}get numFlags(){return this.allCells.filter((t=>t.flag)).length}get allCells(){return this._allCells||(this._allCells=[],this.columns.forEach((t=>{t.forEach((t=>{this._allCells.push(t)}))}))),this._allCells}getCell(t,e){var n;return null===(n=this.columns[t])||void 0===n?void 0:n[e]}getAdjacentCells(t){const e=t.column,n=t.row,s=[];let o;const r=this.columns[e-1];(o=null==r?void 0:r[n-1])&&s.push(o),(o=null==r?void 0:r[n])&&s.push(o),(o=null==r?void 0:r[n+1])&&s.push(o);const l=this.columns[e];(o=null==l?void 0:l[n-1])&&s.push(o),(o=null==l?void 0:l[n+1])&&s.push(o);const c=this.columns[e+1];return(o=null==c?void 0:c[n-1])&&s.push(o),(o=null==c?void 0:c[n])&&s.push(o),(o=null==c?void 0:c[n+1])&&s.push(o),s}dig(t){if(t.dug=!0,!t.mine&&0===t.closeMines){this.getAdjacentCells(t).forEach((t=>{t.dug||this.dig(t)}))}}clearAdjacent(t){const e=this.getAdjacentCells(t),n=e.filter((t=>t.flag)).filter((t=>t)).length;n===t.closeMines&&e.forEach((t=>{t.flag||this.dig(t)}))}initialDig(t){const e=this.getAdjacentCells(t);t.mine?t.flag=!0:this.dig(t),e.forEach((t=>{t.mine?t.flag=!0:this.dig(t)})),this.hasDug=!0}solve(){this.allCells.forEach((t=>{t.mine?(t.dug=!1,t.flag=!0):t.dug=!0}))}}function Bt(t){let e,n,s,r,l,c,i,u,g,b,w,x,_,k,E,j,M=t[0].numFlags+"",C=t[0].numMines+"";function O(e){t[3](e)}let S={};return void 0!==t[0]&&(S.model=t[0]),x=new Gt({props:S}),L.push((()=>V(x,"model",O))),{c(){e=h("div"),n=h("p"),s=m(M),r=m(" of "),l=m(C),c=m(" mines found"),i=p(),u=h("button"),u.textContent="Refresh",g=p(),b=h("button"),b.textContent="Solve",w=p(),Z(x.$$.fragment),v(n,"class","my-0 text-black dark:text-white"),v(u,"class","p-2 rounded bg-sky-500 text-white dark:text-gray-800"),v(b,"class","p-2 rounded bg-sky-500 text-white dark:text-gray-800"),v(e,"class","flex justify-center items-center gap-4 text-center")},m(o,d){f(o,e,d),a(e,n),a(n,s),a(n,r),a(n,l),a(n,c),a(e,i),a(e,u),a(e,g),a(e,b),f(o,w,d),tt(x,o,d),k=!0,E||(j=[$(u,"click",t[1]),$(b,"click",t[2])],E=!0)},p(t,e){(!k||1&e)&&M!==(M=t[0].numFlags+"")&&y(s,M),(!k||1&e)&&C!==(C=t[0].numMines+"")&&y(l,C);const n={};!_&&1&e&&(_=!0,n.model=t[0],P((()=>_=!1))),x.$set(n)},i(t){k||(B(x.$$.fragment,t),k=!0)},o(t){U(x.$$.fragment,t),k=!1},d(t){t&&d(e),t&&d(w),et(x,t),E=!1,o(j)}}}function Ut(t){let e,n,s,o,r=t[0]&&Bt(t);return{c(){e=p(),n=h("section"),s=h("div"),r&&r.c(),document.title="Minesweeper",v(s,"class","flex flex-col flex-wrap gap-4"),v(n,"class","flex justify-center")},m(t,l){f(t,e,l),f(t,n,l),a(n,s),r&&r.m(s,null),o=!0},p(t,[e]){t[0]?r?(r.p(t,e),1&e&&B(r,1)):(r=Bt(t),r.c(),B(r,1),r.m(s,null)):r&&(G(),U(r,1,1,(()=>{r=null})),X())},i(t){o||(B(r),o=!0)},o(t){U(r),o=!1},d(t){t&&d(e),t&&d(n),r&&r.d()}}}function Wt(t,e,n){let s=null;function o(){n(0,s=new Xt(18,18,.2))}return k(o),[s,o,function(){s.solve(),n(0,s)},function(t){s=t,n(0,s)}]}class Jt extends st{constructor(t){super(),nt(this,t,Wt,Ut,l,{})}}function Kt(t,e,n){let{params:s}=e;return k((()=>{!async function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await R();const e=("#"==t.charAt(0)?"":"#")+t;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}("/")})),t.$$set=t=>{"params"in t&&n(0,s=t.params)},[s]}class Qt extends st{constructor(t){super(),nt(this,t,Kt,null,l,{params:0})}}function Vt(e){let n,s,o,r,l;return n=new Et({}),r=new pt({props:{routes:e[0]}}),{c(){Z(n.$$.fragment),s=p(),o=h("main"),Z(r.$$.fragment),v(o,"class","svelte-5kshsn")},m(t,e){tt(n,t,e),f(t,s,e),f(t,o,e),tt(r,o,null),l=!0},p:t,i(t){l||(B(n.$$.fragment,t),B(r.$$.fragment,t),l=!0)},o(t){U(n.$$.fragment,t),U(r.$$.fragment,t),l=!1},d(t){et(n,t),t&&d(s),t&&d(o),et(r)}}}function Zt(t){return[{"/":Mt,"/minesweeper":Jt,"*":Qt}]}return new class extends st{constructor(t){super(),nt(this,t,Zt,Vt,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
